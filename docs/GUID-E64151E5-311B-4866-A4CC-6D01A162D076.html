<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" data-whc_version="24.1">
    <head><link rel="shortcut icon" href="oxygen-webhelp\template\resources/images/favicon.ico"/><link rel="icon" href="oxygen-webhelp\template\resources/images/favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="The quantities available in the Metrology Module make observable all basic components required to completely define or derive all power system measurement quantities for most currently used ..."/><meta name="copyright" content="(C) Copyright 2024"/><meta name="generator" content="DITA-OT"/><title>1.1.3.2 Using The Library</title><!--  Generated with Oxygen version 24.1, build number 2022062014.  --><meta name="wh-path2root" content=""/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /D:\InfoShare\Data\Publish\Data\hmrdmi0idvn\work\temp?&gt;&lt;?workdir-uri file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/temp/?&gt;&lt;?path2project?&gt;&lt;?path2project-uri ./?&gt;&lt;?path2rootmap-uri ./?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;using-the-library&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;topic:1;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;title:1;184:15&#34;&gt;Using The Library&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;body:1;184:15&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;ul:1;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;li:1;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;p:1;184:15&#34;&gt;The quantities available in the Metrology Module make observable all basic components required to completely define or derive all power system measurement quantities for most currently used definitions of power. All per-phase voltages, currents, and power for fundamental and fundamental + harmonics are available, allowing computation of all modern system or poly-phase power quantities.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;li:2;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;p:2;184:15&#34;&gt;Measurement data from one measurement interval is short-lived and does not persist longer than one measurement interval. At the end of a measurement interval, the user will be informed by software interrupt at which point the user must read all pertinent quantities before the next measurement period ends.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;li:3;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;p:3;184:15&#34;&gt;All computed quantities available through the Metrology Module are integrated over a time interval equivalent to an integral number of periods of the fundamental frequency. All integration periods are approximated by the final output sample rate of the DSP filters, 4000 Hz; so, measurement accuracy will increase using longer integration periods. One second is the recommended minimum integration period (50 cycles of 50Hz or 60 cycles of 60Hz), but fewer numbers of samples may still yield acceptable results. DSP filters require a settling time before accurate measurements may be used for revenue-quality metering. It is recommended to wait at least 250ms after startup before testing when testing to revenue-grade accuracy.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;li:4;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;p:4;184:15&#34;&gt;The Smart Meter DSP Module is specifically designed to accept samples from an ATSENSE Δ/Σ ADC using an OSR=64, at an input sample rate of 16.000 KHz. This input data stream is further filtered to an internal sample rate of 4.000 KHz for generation of metrology quantities. All computed metrology quantities are available at a rate of approximately 1Hz, when using recommended settings.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;li:5;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;p:5;184:15&#34;&gt;DSP channel nomenclature defines 3 basic voltage channels: V_A, V_B and V_C, and 4 basic current channels: I_A, I_B, I_C, and measured neutral current, I_ Nm. The current channels are combined to create an accumulated imputed neutral current, I_Ni, and an accumulated sample-by-sample difference between the measured and imputed neutral currents, I_Nmi.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;li:6;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;p:6;184:15&#34;&gt;Values further labeled as “_F” indicate values associated with the fundamental frequency component only, while values without the “_F” indicate values associated with fundamental + harmonics.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;p:7;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;b:1;184:15&#34;&gt;Example application to handle metrology driver based on FreeRTOS application&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; outputclass=&#34;c&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md&#34; xtrc=&#34;codeblock:1;184:15&#34;&gt; void SYS_Initialize ( void* data ) { (...) /* Initialize Metrology Driver Instance */ DRV_METROLOGY_Initialize((SYS_MODULE_INIT *)&amp;amp;drvMetrologyInitData, RSTC_ResetCauseGet()); (...) } static void _APP_METROLOGY_IntegrationCallback(void) { if ((app_metrologyData.state == APP_METROLOGY_STATE_RUNNING) || (app_metrologyData.state == APP_METROLOGY_STATE_CHECK_CALIBRATION)) { /* Signal Metrology thread to update measurements for an integration period */ OSAL_SEM_Post(&amp;amp;appMetrologySemID); } } static void _APP_METROLOGY_CalibrationCallback(bool result) { if (app_metrologyData.pCalibrationCallback) { app_metrologyData.pCalibrationCallback(result); } /* Signal Metrology to exit calibration status */ OSAL_SEM_Post(&amp;amp;appMetrologyCalibrationSemID); } static void _APP_METROLOGY_HarmonicAnalysisCallback(uint8_t harmonicNum) { if (app_metrologyData.pHarmonicAnalysisCallback) { app_metrologyData.harmonicAnalysisPending = false; app_metrologyData.pHarmonicAnalysisCallback(harmonicNum); } } void APP_METROLOGY_Initialize (void) { /* Detection of the WDOG0 Reset */ if (RSTC_ResetCauseGet() == RSTC_SR_RSTTYP(RSTC_SR_RSTTYP_WDT0_RST_Val)) { app_metrologyData.startMode = DRV_METROLOGY_START_SOFT; } else { app_metrologyData.startMode = DRV_METROLOGY_START_HARD; } /* Get Pointers to metrology data regions */ app_metrologyData.pMetControl = DRV_METROLOGY_GetControl(); app_metrologyData.pMetStatus = DRV_METROLOGY_GetStatus(); app_metrologyData.pMetAccData = DRV_METROLOGY_GetAccData(); app_metrologyData.pMetHarData = DRV_METROLOGY_GetHarData(); /* Set Callback for each metrology integration process */ DRV_METROLOGY_IntegrationCallbackRegister(_APP_METROLOGY_IntegrationCallback); /* Set Callback for calibration process */ DRV_METROLOGY_CalibrationCallbackRegister(_APP_METROLOGY_CalibrationCallback); /* Set Callback for harmonic analysis process */ DRV_METROLOGY_HarmonicAnalysisCallbackRegister(_APP_METROLOGY_HarmonicAnalysisCallback); /* Clear Harmonic Analysis Data */ app_metrologyData.harmonicAnalysisPending = false; app_metrologyData.pHarmonicAnalisysCallback = NULL; app_metrologyData.pHarmonicAnalysisResponse = NULL; /* Create the Metrology Integration Semaphore. */ if (OSAL_SEM_Create(&amp;amp;appMetrologySemID, OSAL_SEM_TYPE_BINARY, 0, 0) == OSAL_RESULT_FALSE) { /* Handle error condition. Not sufficient memory to create semaphore */ } /* Create the Metrology Calibration Semaphore. */ if (OSAL_SEM_Create(&amp;amp;appMetrologyCalibrationSemID, OSAL_SEM_TYPE_BINARY, 0, 0) == OSAL_RESULT_FALSE) { /* Handle error condition. Not sufficient memory to create semaphore */ } app_metrologyData.state = APP_METROLOGY_STATE_INIT; } void APP_METROLOGY_Tasks (void) { APP_ENERGY_QUEUE_DATA newMetrologyData; APP_EVENTS_QUEUE_DATA newEvent; /* Check the application's current state. */ switch (app_metrologyData.state) { /* Application's initial state. */ case APP_METROLOGY_STATE_INIT: { DRV_METROLOGY_CONTROL * pConfiguration = NULL; /* Check if any specific configuration should be applied */ if (app_metrologyData.setConfiguration) { pConfiguration = &amp;amp;app_metrologyData.configuration; } if (DRV_METROLOGY_Open(app_metrologyData.startMode, pConfiguration) == DRV_METROLOGY_SUCCESS) { if (app_metrologyData.startMode == DRV_METROLOGY_START_HARD) { app_metrologyData.state = APP_METROLOGY_STATE_START; } else { app_metrologyData.state = APP_METROLOGY_STATE_RUNNING; } } else { app_metrologyData.state = APP_METROLOGY_STATE_ERROR; } vTaskDelay(10 / portTICK_PERIOD_MS); break; } case APP_METROLOGY_STATE_START: { if (DRV_METROLOGY_GetStatus() == DRV_METROLOGY_STATUS_READY) { if (DRV_METROLOGY_Start() == DRV_METROLOGY_SUCCESS) { app_metrologyData.state = APP_METROLOGY_STATE_RUNNING; } else { app_metrologyData.state = APP_METROLOGY_STATE_ERROR; } vTaskDelay(10 / portTICK_PERIOD_MS); } break; } case APP_METROLOGY_STATE_RUNNING: { /* Wait for the metrology semaphore to get measurements at the end of the integration period. */ OSAL_SEM_Pend(&amp;amp;appMetrologySemID, OSAL_WAIT_FOREVER); if (app_metrologyData.state == APP_METROLOGY_STATE_INIT) { /* Received Reload Command */ break; } else if (app_metrologyData.state == APP_METROLOGY_STATE_CHECK_CALIBRATION) { /* Calibration process runnning. New measurements should not be reported. */ break; } // Send new Energy values to the Energy Task app_metrologyData.queueFree = uxQueueSpacesAvailable(appEnergyQueueID); if (app_metrologyData.queueFree) { newMetrologyData.energy = DRV_METROLOGY_GetEnergyValue(true); newMetrologyData.Pt = DRV_METROLOGY_GetRMSValue(RMS_PT); xQueueSend(appEnergyQueueID, &amp;amp;newMetrologyData, (TickType_t) 0); } else { SYS_CMD_MESSAGE(&#34;ENERGY Queue is FULL!!!\r\n&#34;); } // Send new Events to the Events Task app_metrologyData.queueFree = uxQueueSpacesAvailable(appEventsQueueID); if (app_metrologyData.queueFree) { RTC_TimeGet(&amp;amp;newEvent.eventTime); DRV_METROLOGY_GetEventsData(&amp;amp;newEvent.eventFlags); xQueueSend(appEventsQueueID, &amp;amp;newEvent, (TickType_t) 0); } else { SYS_CMD_MESSAGE(&#34;EVENTS Queue is FULL!!!\r\n&#34;); } break; } case APP_METROLOGY_STATE_CHECK_CALIBRATION: { /* Wait for the metrology semaphore to wait calibration ends. */ OSAL_SEM_Pend(&amp;amp;appMetrologyCalibrationSemID, OSAL_WAIT_FOREVER); app_metrologyData.state = APP_METROLOGY_STATE_RUNNING; vTaskDelay(10 / portTICK_PERIOD_MS); break; } /* The default state should never be executed. */ case APP_METROLOGY_STATE_ERROR: default: { /* TODO: Handle error in application's state machine. */ break; } } }&lt;/codeblock&gt;&lt;/body&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; mapkeyref=&#34;GUID-F454DB36-5AD7-4DBC-882C-6FC64DF4ADB2&#34; xtrc=&#34;topicref:3;6:402&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-F7DFF4F4-3EB3-45D5-B41E-A29DF54D0466.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;GUID-2023FB1C-E7E7-4813-9BA3-480FEB57627B.md&#34; mapclass=&#34;- map/topicref &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;6:99&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/hmrdmi0idvn/work/3/en-US/GUID-F7DFF4F4-3EB3-45D5-B41E-A29DF54D0466.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot gentext?&gt;Metrology Driver&lt;/linktext&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="GUID-E64151E5-311B-4866-A4CC-6D01A162D076.md"/><meta name="wh-out-relpath" content="GUID-E64151E5-311B-4866-A4CC-6D01A162D076.html"/>
    <!-- Latest compiled and minified Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="./oxygen-webhelp/lib/bootstrap/css/bootstrap.min.css"/>
    
    <link rel="stylesheet" href="./oxygen-webhelp/lib/jquery-ui/jquery-ui.min.css"/>
    
    <!-- Template default styles  -->
    <link rel="stylesheet" type="text/css" href="./oxygen-webhelp/app/topic-page.css?buildId=2022062014"/>
    
    
    <script src="./oxygen-webhelp/lib/jquery/jquery-3.5.1.min.js"></script>
    
    <script data-main="./oxygen-webhelp/app/topic-page.js" src="./oxygen-webhelp/lib/requirejs/require.js"></script>
<link rel="stylesheet" type="text/css" href="oxygen-webhelp/template/microchip.css?buildId=2022062014"/><link rel="stylesheet" type="text/css" href="oxygen-webhelp/template/notes.css?buildId=2022062014"/>
<script src="mchp-context-help.js"></script>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async="" type="text/javascript"></script>
    <script src="https://assets.adobedtm.com/6a72a357eb48/a636c708c7fe/launch-0b0023397020.min.js"></script><!-- Adobe Analytics -->
</head>

    <body id="using-the-library" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            Jump to main content
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="index.html" class=" wh_logo d-none d-sm-block "><img src="oxygen-webhelp\template\resources/images/microchip.png" alt="MPLAB® Harmony Smart Energy Library &#xA;    "/></a>
                    <div class=" wh_publication_title "><a href="index.html">MPLAB® Harmony Smart Energy Library 
    </a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        </div>
    </div>
</header>
        
        
         
        
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="search.html"><div class="d-flex justify-contents-around"><div class="flex-grow-1"></div><div class="position-relative flex-grow-1"><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" required="required"/><button type="submit" class="wh_search_button" aria-label="Search"><span class="search_input_text">Search</span></button></div><div class="align-self-center flex-grow-1 ml-2"></div></div></form>
            
            <div class="mchp-color-stripe-grid-container">
  <div class="mchp-main-bar mchp-orange-bar"></div>
  <div class="mchp-main-bar mchp-blue-bar"></div>
  <div class="mchp-main-bar mchp-green-bar"></div>
</div>
            
        </div>
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="index.html"><span>Home</span></a></span></li><li><div class="topicref" data-id="mplab-harmony-smart-energy-library"><div class="title"><a href="GUID-81A73CB2-02C0-41CF-9C28-0AECE56FFF26.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1</ph>
MPLAB® Harmony Smart Energy Library</a></div></div></li><li><div class="topicref" data-id="driver-libraries"><div class="title"><a href="GUID-97853572-2DF9-4BDC-8CC2-427931EE96D9.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1</ph>
Driver Libraries</a></div></div></li><li><div class="topicref" data-id="metrology-driver"><div class="title"><a href="GUID-2023FB1C-E7E7-4813-9BA3-480FEB57627B.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1.3</ph>
Metrology Driver</a></div></div></li><li class="active"><div class="topicref" data-id="using-the-library"><div class="title"><a href="GUID-E64151E5-311B-4866-A4CC-6D01A162D076.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1.3.2</ph>
Using The Library</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="Collapse sections" title="Collapse sections"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            <div class="row" style="margin-top: -1em;"><div class="col-lg-9 col-md-9 col-sm-12 offset-lg-3 offset-md-3 text-right border-bottom mb-1"><h2 class="text-dark header_title">
    </h2></div></div>
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem" aria-expanded="true"><div data-tocid="mplab-harmony-smart-energy-library-d3789e11" class="topicref" data-id="mplab-harmony-smart-energy-library" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action mplab-harmony-smart-energy-library-d3789e11-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-81A73CB2-02C0-41CF-9C28-0AECE56FFF26.html" id="mplab-harmony-smart-energy-library-d3789e11-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1</ph>
MPLAB® Harmony Smart Energy Library</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="true"><div data-tocid="driver-libraries-d3789e19" class="topicref" data-id="driver-libraries" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action driver-libraries-d3789e19-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-97853572-2DF9-4BDC-8CC2-427931EE96D9.html" id="driver-libraries-d3789e19-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1</ph>
Driver Libraries</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="plc-phy-driver-d3789e27" class="topicref" data-id="plc-phy-driver" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action plc-phy-driver-d3789e27-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-261B02C6-E685-4C12-8EB7-5E717F054F60.html" id="plc-phy-driver-d3789e27-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1.1</ph>
PLC PHY Driver</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="g3-mac-rt-driver-d3789e495" class="topicref" data-id="g3-mac-rt-driver" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action g3-mac-rt-driver-d3789e495-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-A7685FE8-B336-4379-A26B-C821EBD7CD85.html" id="g3-mac-rt-driver-d3789e495-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1.2</ph>
G3 MAC RT Driver</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="metrology-driver-d3789e1068" class="topicref" data-id="metrology-driver" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action metrology-driver-d3789e1068-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-2023FB1C-E7E7-4813-9BA3-480FEB57627B.html" id="metrology-driver-d3789e1068-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1.3</ph>
Metrology Driver</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="how-the-metrology-driver-library-works-d3789e1076" class="topicref" data-id="how-the-metrology-driver-library-works" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-21C6829A-CB89-4FE2-A0B6-7467DEAB58C5.html" id="how-the-metrology-driver-library-works-d3789e1076-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1.3.1</ph>
How the Metrology driver library works</a></div></div></li><li role="treeitem" class="active"><div data-tocid="using-the-library-d3789e1084" class="topicref" data-id="using-the-library" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-E64151E5-311B-4866-A4CC-6D01A162D076.html" id="using-the-library-d3789e1084-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1.3.2</ph>
Using The Library</a></div></div></li><li role="treeitem"><div data-tocid="metrology-driver-configurations-d3789e1092" class="topicref" data-id="metrology-driver-configurations" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-2356AE43-5731-46E5-8556-A282237A8145.html" id="metrology-driver-configurations-d3789e1092-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1.3.3</ph>
Metrology driver Configurations</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="library-interface-d3789e1100" class="topicref" data-id="library-interface" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action library-interface-d3789e1100-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-760CFE1C-CBE5-4B83-9F96-A1276BC1D5F6.html" id="library-interface-d3789e1100-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1.3.4</ph>
Library Interface</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="rf215-driver-d3789e1447" class="topicref" data-id="rf215-driver" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action rf215-driver-d3789e1447-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-2EE5EBF2-6C99-4D66-9EEC-A0C3C8CD40EF.html" id="rf215-driver-d3789e1447-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1.4</ph>
RF215 Driver</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="service-libraries-d3789e1875" class="topicref" data-id="service-libraries" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action service-libraries-d3789e1875-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-3DBF4BBC-895F-4E64-901F-C76DB2918FDD.html" id="service-libraries-d3789e1875-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.2</ph>
Service Libraries</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="demo-applications-d3789e3246" class="topicref" data-id="demo-applications" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action demo-applications-d3789e3246-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-2188B5B7-760D-4261-AEB9-DDCD9B01A109.html" id="demo-applications-d3789e3246-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.3</ph>
Demo Applications</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="getting-started-with-mplab-harmony-plc-stack-d3789e3742" class="topicref" data-id="getting-started-with-mplab-harmony-plc-stack" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action getting-started-with-mplab-harmony-plc-stack-d3789e3742-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-4183CE78-B659-4918-8651-B77A34D15302.html" id="getting-started-with-mplab-harmony-plc-stack-d3789e3742-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">2</ph>
Getting Started with MPLAB® Harmony PLC Stack</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B-d3789e3919" class="topicref backmatter backmatter_parent" data-id="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B-d3789e3919-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B.html" id="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B-d3789e3919-link">Microchip Information</a></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-9 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        
                        <div class=" wh_topic_content body "><main role="main"><article role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1" style="">1.1.3.2 Using The Library</h1><div class="- topic/body body"><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">The quantities available in the Metrology Module make observable all basic components required to completely define or derive all power system measurement quantities for most currently used definitions of power. All per-phase voltages, currents, and power for fundamental and fundamental + harmonics are available, allowing computation of all modern system or poly-phase power quantities.</p></li><li class="- topic/li li"><p class="- topic/p p">Measurement data from one measurement interval is short-lived and does not persist longer than one measurement interval. At the end of a measurement interval, the user will be informed by software interrupt at which point the user must read all pertinent quantities before the next measurement period ends.</p></li><li class="- topic/li li"><p class="- topic/p p">All computed quantities available through the Metrology Module are integrated over a time interval equivalent to an integral number of periods of the fundamental frequency. All integration periods are approximated by the final output sample rate of the DSP filters, 4000 Hz; so, measurement accuracy will increase using longer integration periods. One second is the recommended minimum integration period (50 cycles of 50Hz or 60 cycles of 60Hz), but fewer numbers of samples may still yield acceptable results.
DSP filters require a settling time before accurate measurements may be used for revenue-quality metering. It is recommended to wait at least 250ms after startup before testing when testing to revenue-grade accuracy.</p></li><li class="- topic/li li"><p class="- topic/p p">The Smart Meter DSP Module is specifically designed to accept samples from an ATSENSE Δ/Σ ADC using an OSR=64, at an input sample rate of 16.000 KHz. This input data stream is further filtered to an internal sample rate of 4.000 KHz for generation of metrology quantities. All computed metrology quantities are available at a rate of approximately 1Hz, when using recommended settings.</p></li><li class="- topic/li li"><p class="- topic/p p">DSP channel nomenclature defines 3 basic voltage channels: V_A, V_B and V_C, and 4 basic current channels: I_A, I_B, I_C, and measured neutral current,
I_ Nm. The current channels are combined to create an accumulated imputed neutral current, I_Ni, and an accumulated sample-by-sample difference between the measured and imputed neutral currents, I_Nmi.</p></li><li class="- topic/li li"><p class="- topic/p p">Values further labeled as “_F” indicate values associated with the fundamental frequency component only, while values without the “_F” indicate values associated with fundamental + harmonics.</p></li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Example application to handle metrology driver based on FreeRTOS application</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock c">
<strong class="hl-keyword">void</strong> SYS_Initialize ( <strong class="hl-keyword">void</strong>* data )
{
    (...)
    
    <em class="hl-comment">/* Initialize Metrology Driver Instance */</em>
    DRV_METROLOGY_Initialize((SYS_MODULE_INIT *)&amp;drvMetrologyInitData, RSTC_ResetCauseGet());
    
    (...)
}

<strong class="hl-keyword">static</strong> <strong class="hl-keyword">void</strong> <span class="hl-functions">_APP_METROLOGY_IntegrationCallback</span>(<strong class="hl-keyword">void</strong>)
{
    <strong class="hl-keyword">if</strong> ((app_metrologyData.state == APP_METROLOGY_STATE_RUNNING) ||
        (app_metrologyData.state == APP_METROLOGY_STATE_CHECK_CALIBRATION))
    {
        <em class="hl-comment">/* Signal Metrology thread to update measurements for an integration period */</em>
        OSAL_SEM_Post(&amp;appMetrologySemID);
    }
}

<strong class="hl-keyword">static</strong> <strong class="hl-keyword">void</strong> <span class="hl-functions">_APP_METROLOGY_CalibrationCallback</span>(bool result)
{
    <strong class="hl-keyword">if</strong> (app_metrologyData.pCalibrationCallback)
    {
        app_metrologyData.pCalibrationCallback(result);
    }

    <em class="hl-comment">/* Signal Metrology to exit calibration status */</em>
    OSAL_SEM_Post(&amp;appMetrologyCalibrationSemID);
}

<strong class="hl-keyword">static</strong> <strong class="hl-keyword">void</strong> <span class="hl-functions">_APP_METROLOGY_HarmonicAnalysisCallback</span>(uint8_t harmonicNum)
{
    <strong class="hl-keyword">if</strong> (app_metrologyData.pHarmonicAnalysisCallback)
    {
        app_metrologyData.harmonicAnalysisPending = false;
        app_metrologyData.pHarmonicAnalysisCallback(harmonicNum);
    }
}

<strong class="hl-keyword">void</strong> APP_METROLOGY_Initialize (<strong class="hl-keyword">void</strong>)
{
    <em class="hl-comment">/* Detection of the WDOG0 Reset */</em>
    <strong class="hl-keyword">if</strong> (RSTC_ResetCauseGet() == RSTC_SR_RSTTYP(RSTC_SR_RSTTYP_WDT0_RST_Val))
    {
        app_metrologyData.startMode = DRV_METROLOGY_START_SOFT;
    }
    <strong class="hl-keyword">else</strong>
    {
        app_metrologyData.startMode = DRV_METROLOGY_START_HARD;        
    }

    <em class="hl-comment">/* Get Pointers to metrology data regions */</em>
    app_metrologyData.pMetControl = DRV_METROLOGY_GetControl();
    app_metrologyData.pMetStatus = DRV_METROLOGY_GetStatus();
    app_metrologyData.pMetAccData = DRV_METROLOGY_GetAccData();
    app_metrologyData.pMetHarData = DRV_METROLOGY_GetHarData();
    
    <em class="hl-comment">/* Set Callback for each metrology integration process */</em>
    DRV_METROLOGY_IntegrationCallbackRegister(_APP_METROLOGY_IntegrationCallback);
    <em class="hl-comment">/* Set Callback for calibration process */</em>
    DRV_METROLOGY_CalibrationCallbackRegister(_APP_METROLOGY_CalibrationCallback);
    <em class="hl-comment">/* Set Callback for harmonic analysis process */</em>
    DRV_METROLOGY_HarmonicAnalysisCallbackRegister(_APP_METROLOGY_HarmonicAnalysisCallback);
    
    <em class="hl-comment">/* Clear Harmonic Analysis Data */</em>
    app_metrologyData.harmonicAnalysisPending = false;
    app_metrologyData.pHarmonicAnalisysCallback = NULL;
    app_metrologyData.pHarmonicAnalysisResponse = NULL;
    
    <em class="hl-comment">/* Create the Metrology Integration Semaphore. */</em>
    <strong class="hl-keyword">if</strong> (OSAL_SEM_Create(&amp;appMetrologySemID, OSAL_SEM_TYPE_BINARY, <span class="hl-number">0</span>, <span class="hl-number">0</span>) == OSAL_RESULT_FALSE)
    {
        <em class="hl-comment">/* Handle error condition. Not sufficient memory to create semaphore */</em>
    }
    
    <em class="hl-comment">/* Create the Metrology Calibration Semaphore. */</em>
    <strong class="hl-keyword">if</strong> (OSAL_SEM_Create(&amp;appMetrologyCalibrationSemID, OSAL_SEM_TYPE_BINARY, <span class="hl-number">0</span>, <span class="hl-number">0</span>) == OSAL_RESULT_FALSE)
    {
        <em class="hl-comment">/* Handle error condition. Not sufficient memory to create semaphore */</em>
    }
    
    app_metrologyData.state = APP_METROLOGY_STATE_INIT;
}

<strong class="hl-keyword">void</strong> APP_METROLOGY_Tasks (<strong class="hl-keyword">void</strong>)
{
    APP_ENERGY_QUEUE_DATA newMetrologyData;
    APP_EVENTS_QUEUE_DATA newEvent;

    <em class="hl-comment">/* Check the application's current state. */</em>
    <strong class="hl-keyword">switch</strong> (app_metrologyData.state)
    {
        <em class="hl-comment">/* Application's initial state. */</em>
        <strong class="hl-keyword">case</strong> APP_METROLOGY_STATE_INIT:
        {
            DRV_METROLOGY_CONTROL * pConfiguration = NULL;
            
            <em class="hl-comment">/* Check if any specific configuration should be applied */</em>
            <strong class="hl-keyword">if</strong> (app_metrologyData.setConfiguration)
            {
                pConfiguration = &amp;app_metrologyData.configuration;
            }
            
            <strong class="hl-keyword">if</strong> (DRV_METROLOGY_Open(app_metrologyData.startMode, pConfiguration) == DRV_METROLOGY_SUCCESS)
            {
                <strong class="hl-keyword">if</strong> (app_metrologyData.startMode == DRV_METROLOGY_START_HARD)
                {
                    app_metrologyData.state = APP_METROLOGY_STATE_START;
                }
                <strong class="hl-keyword">else</strong>
                {
                    app_metrologyData.state = APP_METROLOGY_STATE_RUNNING;
                }
            }
            <strong class="hl-keyword">else</strong>
            {
                app_metrologyData.state = APP_METROLOGY_STATE_ERROR;
            }

            vTaskDelay(<span class="hl-number">10</span> / portTICK_PERIOD_MS);
            <strong class="hl-keyword">break</strong>;
        }

        <strong class="hl-keyword">case</strong> APP_METROLOGY_STATE_START:
        {
            <strong class="hl-keyword">if</strong> (DRV_METROLOGY_GetStatus() == DRV_METROLOGY_STATUS_READY)
            {
                <strong class="hl-keyword">if</strong> (DRV_METROLOGY_Start() == DRV_METROLOGY_SUCCESS)
                {
                    app_metrologyData.state = APP_METROLOGY_STATE_RUNNING;
                }
                <strong class="hl-keyword">else</strong>
                {
                    app_metrologyData.state = APP_METROLOGY_STATE_ERROR;
                }

                vTaskDelay(<span class="hl-number">10</span> / portTICK_PERIOD_MS);
            }

            <strong class="hl-keyword">break</strong>;
        }

        <strong class="hl-keyword">case</strong> APP_METROLOGY_STATE_RUNNING:
        {
            <em class="hl-comment">/* Wait for the metrology semaphore to get measurements at the end of the integration period. */</em>
            OSAL_SEM_Pend(&amp;appMetrologySemID, OSAL_WAIT_FOREVER);
            
            <strong class="hl-keyword">if</strong> (app_metrologyData.state == APP_METROLOGY_STATE_INIT)
            {
                <em class="hl-comment">/* Received Reload Command */</em>
                <strong class="hl-keyword">break</strong>;
            }
            <strong class="hl-keyword">else</strong> <strong class="hl-keyword">if</strong> (app_metrologyData.state == APP_METROLOGY_STATE_CHECK_CALIBRATION)
            {
                <em class="hl-comment">/* Calibration process runnning. New measurements should not be reported. */</em>
                <strong class="hl-keyword">break</strong>;
            }            

            <em class="hl-comment">// Send new Energy values to the Energy Task</em>
            app_metrologyData.queueFree = uxQueueSpacesAvailable(appEnergyQueueID);
            <strong class="hl-keyword">if</strong> (app_metrologyData.queueFree)
            {
                newMetrologyData.energy = DRV_METROLOGY_GetEnergyValue(true);
                newMetrologyData.Pt = DRV_METROLOGY_GetRMSValue(RMS_PT);
                xQueueSend(appEnergyQueueID, &amp;newMetrologyData, (TickType_t) <span class="hl-number">0</span>);
            }
            <strong class="hl-keyword">else</strong>
            {
                SYS_CMD_MESSAGE(<span class="hl-string">"ENERGY Queue is FULL!!!\r\n"</span>);
            }
            
            <em class="hl-comment">// Send new Events to the Events Task</em>
            app_metrologyData.queueFree = uxQueueSpacesAvailable(appEventsQueueID);
            <strong class="hl-keyword">if</strong> (app_metrologyData.queueFree)
            {
                RTC_TimeGet(&amp;newEvent.eventTime);
                DRV_METROLOGY_GetEventsData(&amp;newEvent.eventFlags);
                xQueueSend(appEventsQueueID, &amp;newEvent, (TickType_t) <span class="hl-number">0</span>);
            }
            <strong class="hl-keyword">else</strong>
            {
                SYS_CMD_MESSAGE(<span class="hl-string">"EVENTS Queue is FULL!!!\r\n"</span>);
            }
            
            <strong class="hl-keyword">break</strong>;
        }

        <strong class="hl-keyword">case</strong> APP_METROLOGY_STATE_CHECK_CALIBRATION:
        {
            <em class="hl-comment">/* Wait for the metrology semaphore to wait calibration ends. */</em>
            OSAL_SEM_Pend(&amp;appMetrologyCalibrationSemID, OSAL_WAIT_FOREVER);
            
            app_metrologyData.state = APP_METROLOGY_STATE_RUNNING;
            
            vTaskDelay(<span class="hl-number">10</span> / portTICK_PERIOD_MS);
            <strong class="hl-keyword">break</strong>;
        }

        <em class="hl-comment">/* The default state should never be executed. */</em>
        <strong class="hl-keyword">case</strong> APP_METROLOGY_STATE_ERROR:
        <strong class="hl-keyword">default</strong>:
        {
            <em class="hl-comment">/* TODO: Handle error in application's state machine. */</em>
            <strong class="hl-keyword">break</strong>;
        }
    }
}</pre></div></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
    <div class="footer">
  <div class="mchp-wh-footer">
    <div class="mchp-footer">
      <div class="mchp-footer-tier1">
        <div class="spacer"></div>
        <div class="mchp-footer-container">
          <div class="mchp-footer-links mchp-social-media-links">
            <div class="mchp-component-items">
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.facebook.com/pages/Microchip-Technology-Inc/20320981741" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Facebook" src="oxygen-webhelp/template/resources/images/201016-corp-facebook.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.linkedin.com/company/microchip-technology" target="_blank">
                  <img class="cmp-image__image" alt="Microchip LinkedIn" src="oxygen-webhelp/template/resources/images/201016-corp-linkedin.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://twitter.com/MicrochipTech" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Twitter" src="oxygen-webhelp/template/resources/images/201016-corp-twitter.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.youtube.com/user/MicrochipTechnology" target="_blank">
                  <img class="cmp-image__image" alt="Microchip YouTube" src="oxygen-webhelp/template/resources/images/201016-corp-youtube.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.instagram.com/microchiptechnologyinc/" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Instagram" src="oxygen-webhelp/template/resources/images/201016-corp-instagram.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.weibo.com/microchiptech" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Weibo" src="oxygen-webhelp/template/resources/images/201016-corp-weibo.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.microchip.com/en-us/about/blog" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Blog" src="oxygen-webhelp/template/resources/images/201016-corp-blog.png"/>
                </a>
              </div>
            </div>
          </div>
          <div class="mchp-footer-links">
            <div class="mchp-component-items">
              <div class="mchp-component-item">
                <div class="link">
                  <a href="https://www.microchip.com/about-us/contact-us" class="mchp-link__link">Contact</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information" class="mchp-link__link">Legal</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information/privacy-policy" class="mchp-link__link">Privacy Policy</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information/microchip-cookie-statement" class="mchp-link__link">Cookies</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item">
                <div class="link">
                  <a href="https://careers.microchip.com/" class="mchp-link__link">Careers</a>
                  <span class="mchp-link__separator"></span>
                </div>
              </div>
            </div>
          </div>
          <div class="mchp-footer-newsletter">
            <div class="cmp-text">
              <p>Stay on the leading edge with our blog</p>
            </div>
            <div class="mchp-button-wrapper">
              <a role="button" href="https://www.microchip.com/en-us/about/blog" class="mchp-button mchp-button-regular solid">
                <span class="mchp-button__span">MicroSolutions</span>
              </a>
            </div>
          </div>
        </div>
        <div class="graphic">
          <img src="oxygen-webhelp/template/resources/images/footer-graphic.png"/>
        </div>
      </div>
      <div class="mchp-footer-tier2">
        <p class="mchp-copyright">© Copyright 1998-2022 Microchip Technology Inc. All rights reserved.</p>
      </div>
    </div>
  </div>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="true" src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-19"></script>
  <script>
    window.dataLayer = window.dataLayer || [];  
    function gtag(){dataLayer.push(arguments);}  
    gtag('js', new Date());   
    gtag('config', 'UA-2724382-19');
  </script>
  
  <script type="text/javascript">_satellite.pageBottom();</script><!-- Adobe Analytics -->
  <script type="text/javascript" src="mchp-js/prepend.js"></script><!-- Package for viewing PDFs on mobile devices -->
  
</div>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
       
        </body>
</html>