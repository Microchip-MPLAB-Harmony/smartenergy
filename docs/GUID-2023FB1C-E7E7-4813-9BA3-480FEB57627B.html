<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="Metrology Driver" />
<meta name="DC.relation" scheme="URI" content="GUID-97853572-2DF9-4BDC-8CC2-427931EE96D9.html" />
<meta name="DC.relation" scheme="URI" content="GUID-21C6829A-CB89-4FE2-A0B6-7467DEAB58C5.html" />
<meta name="DC.relation" scheme="URI" content="GUID-E64151E5-311B-4866-A4CC-6D01A162D076.html" />
<meta name="DC.relation" scheme="URI" content="GUID-2356AE43-5731-46E5-8556-A282237A8145.html" />
<meta name="DC.relation" scheme="URI" content="GUID-760CFE1C-CBE5-4B83-9F96-A1276BC1D5F6.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="metrology-driver" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>Metrology Driver</title>
<meta name="Microsoft.Help.Id" content="GUID-87F4E49E-0A61-4067-B9CF-1FE226A94F9B-metrology-driver" />
<meta name="Microsoft.Help.TocParent" content="GUID-87F4E49E-0A61-4067-B9CF-1FE226A94F9B" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLAB Harmony Smart Energy Library Reference A 02/2022" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-2023FB1C-E7E7-4813-9BA3-480FEB57627B"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body id="metrology-driver">
<h1 class="title topictitle1" id="ariaid-title1">Metrology Driver</h1><div class="body"><p class="p">This driver defines the interface of Microchip smart meter PIC32CXMTSH/C metrology firmware. It describes the metrology control registers, metrology status registers and the quantities which shall be directly computed and available through the metrology interface registers, as well as provides pertinent definitions required for proper coding.</p>
<p class="p"><strong class="ph b">Key Features:</strong></p>
<ul class="ul"><li class="li"><p class="p">This metrology driver has been designed based on Microchip PIC32CXMTSH/C series SoC, featuring industrial 0.2s accuracy class over a dynamic range of 3000:1</p>
</li>
<li class="li"><p class="p">Supports single-phase and bi-phase smart energy applications, including an internal energy metering analog front end (PIC32CXMTSH)</p>
</li>
<li class="li"><p class="p">Supports three-phases smart metering applications, based on an external ATSENSE301HA analog front end (PIC32CXMTC)</p>
</li>
<li class="li"><p class="p">Supports the internal firmware upload process from Core 0 to Core 1</p>
</li>
<li class="li"><p class="p">Supports IPC interrupt handling to read events originated by the metrology library running in Core 1</p>
</li>
<li class="li"><p class="p">Supports write/read to/from the metrology registers</p>
</li>
<li class="li"><p class="p">Supports special functions: Waveform capture, Harmonic Analysis and auto Calibration process.</p>
</li>
<li class="li"><p class="p">The library can be used in both Bare-Metal and RTOS environments</p>
</li>
</ul>
</div>
<div class="related-links">
<ul class="ullinks">
<li class="link ulchildlink"><strong><a href="GUID-21C6829A-CB89-4FE2-A0B6-7467DEAB58C5.html">How the Metrology driver library works</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-E64151E5-311B-4866-A4CC-6D01A162D076.html">Using The Library</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-2356AE43-5731-46E5-8556-A282237A8145.html">Metrology driver Configurations</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-760CFE1C-CBE5-4B83-9F96-A1276BC1D5F6.html">Library Interface</a></strong><br />
</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-97853572-2DF9-4BDC-8CC2-427931EE96D9.html">Driver Libraries</a></div>
</div>
</div></body>
</html>